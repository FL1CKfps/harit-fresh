"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/market";
exports.ids = ["pages/api/market"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "axios":
/*!************************!*\
  !*** external "axios" ***!
  \************************/
/***/ ((module) => {

module.exports = import("axios");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fmarket&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cmarket.js&middlewareConfigBase64=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fmarket&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cmarket.js&middlewareConfigBase64=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_market_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\market.js */ \"(api)/./pages/api/market.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_market_js__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_market_js__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_market_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_market_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/market\",\n        pathname: \"/api/market\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_market_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRm1hcmtldCZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTVDYXBpJTVDbWFya2V0LmpzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQ29EO0FBQ3BEO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyxpREFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsaURBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVELHFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWFya2V0LWFwaS8/ODZhMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXNcXFxcYXBpXFxcXG1hcmtldC5qc1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL21hcmtldFwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL21hcmtldFwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fmarket&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cmarket.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/market.js":
/*!*****************************!*\
  !*** ./pages/api/market.js ***!
  \*****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! axios */ \"axios\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([axios__WEBPACK_IMPORTED_MODULE_0__]);\naxios__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n// Cache for market data\nconst cache = new Map();\nconst CACHE_DURATION = 30 * 60 * 1000; // 30 minutes\n// Data.gov.in API configuration\nconst DATA_GOV_API_KEY = \"579b464db66ec23bdd00000151d86cef0143446b7d39f7425d6afd7f\";\nconst DATA_GOV_BASE_URL = \"https://api.data.gov.in/resource/9ef84268-d588-465a-a308-a864a43d0070\";\nasync function handler(req, res) {\n    // Enable CORS\n    res.setHeader(\"Access-Control-Allow-Origin\", \"*\");\n    res.setHeader(\"Access-Control-Allow-Methods\", \"GET, POST, OPTIONS\");\n    res.setHeader(\"Access-Control-Allow-Headers\", \"Content-Type\");\n    if (req.method === \"OPTIONS\") {\n        res.status(200).end();\n        return;\n    }\n    try {\n        // Clear cache for debugging\n        if (req.query.clearCache === \"true\") {\n            cache.clear();\n            console.log(\"\\uD83D\\uDDD1Ô∏è Cache cleared\");\n            return res.status(200).json({\n                success: true,\n                message: \"Cache cleared\"\n            });\n        }\n        const { commodity, state, market } = req.query;\n        if (!commodity) {\n            return res.status(400).json({\n                success: false,\n                error: \"Missing required parameter: commodity\"\n            });\n        }\n        // Check cache\n        const cacheKey = `${commodity}_${state || \"all\"}_${market || \"all\"}`;\n        const cached = cache.get(cacheKey);\n        if (cached && Date.now() - cached.timestamp < CACHE_DURATION) {\n            console.log(\"\\uD83D\\uDCCB Returning cached data for\", cacheKey);\n            return res.status(200).json({\n                success: true,\n                data: cached.data,\n                cached: true,\n                timestamp: cached.timestamp\n            });\n        }\n        console.log(`üîç Fetching market data for commodity: ${commodity}, state: ${state || \"any\"}, market: ${market || \"any\"}`);\n        // Robust Data.gov.in API call function\n        const fetchDataGovApi = async (filters = {}, limit = 100)=>{\n            try {\n                // Build query parameters\n                const params = new URLSearchParams({\n                    \"api-key\": DATA_GOV_API_KEY,\n                    \"format\": \"json\",\n                    \"limit\": limit.toString()\n                });\n                // Add filters\n                Object.entries(filters).forEach(([key, value])=>{\n                    if (value && value.trim()) {\n                        params.append(`filters[${key}]`, value.trim());\n                    }\n                });\n                const url = `${DATA_GOV_BASE_URL}?${params.toString()}`;\n                console.log(`üì° API Call: ${url}`);\n                const response = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(url, {\n                    headers: {\n                        \"Accept\": \"application/json\",\n                        \"User-Agent\": \"AgricultureApp/1.0 (Government Data Access)\"\n                    },\n                    timeout: 30000\n                });\n                console.log(`üìä API Response: Status ${response.status}, Records: ${response.data?.records?.length || 0}/${response.data?.total || 0}`);\n                if (response.data && response.data.status === \"ok\" && Array.isArray(response.data.records)) {\n                    return {\n                        records: response.data.records,\n                        total: response.data.total,\n                        success: true\n                    };\n                } else {\n                    console.log(\"‚ö†Ô∏è Invalid API response structure:\", response.data);\n                    return {\n                        records: [],\n                        total: 0,\n                        success: false\n                    };\n                }\n            } catch (error) {\n                console.error(\"‚ùå Data.gov.in API Error:\", error.message);\n                console.error(\"‚ùå Error details:\", {\n                    status: error.response?.status,\n                    statusText: error.response?.statusText,\n                    data: error.response?.data\n                });\n                return {\n                    records: [],\n                    total: 0,\n                    success: false,\n                    error: error.message\n                };\n            }\n        };\n        // Transform records to expected format\n        const transformRecords = (records, source = \"data.gov.in\")=>{\n            return records.map((record, index)=>({\n                    \"S.No\": (index + 1).toString(),\n                    \"City\": record.market || record.district || \"Unknown\",\n                    \"State\": record.state || \"Unknown\",\n                    \"District\": record.district || \"Unknown\",\n                    \"Market\": record.market || \"Unknown\",\n                    \"Commodity\": record.commodity || commodity,\n                    \"Variety\": record.variety || \"Standard\",\n                    \"Grade\": record.grade || \"FAQ\",\n                    \"Min Prize\": record.min_price ? record.min_price.toString() : \"0\",\n                    \"Max Prize\": record.max_price ? record.max_price.toString() : \"0\",\n                    \"Model Prize\": record.modal_price ? record.modal_price.toString() : \"0\",\n                    \"Date\": record.arrival_date || new Date().toLocaleDateString(\"en-IN\"),\n                    \"Source\": source\n                }));\n        };\n        let marketData = [];\n        let queryScope = \"none\";\n        // Strategy 1: Exact market match (if both state and market provided)\n        if (state && market) {\n            console.log(\"\\uD83C\\uDFAF Strategy 1: Exact market match\");\n            const exactResult = await fetchDataGovApi({\n                commodity: commodity,\n                state: state,\n                market: market\n            }, 50);\n            if (exactResult.success && exactResult.records.length > 0) {\n                marketData = transformRecords(exactResult.records);\n                queryScope = \"exact_market\";\n                console.log(`‚úÖ Found ${marketData.length} records for exact market match`);\n            } else {\n                console.log(\"‚ö†Ô∏è No records found for exact market match\");\n            }\n        }\n        // Strategy 2: State-level search (if no exact match or only state provided)\n        if (marketData.length === 0 && state) {\n            console.log(\"\\uD83C\\uDF0D Strategy 2: State-level search\");\n            const stateResult = await fetchDataGovApi({\n                commodity: commodity,\n                state: state\n            }, 200);\n            if (stateResult.success && stateResult.records.length > 0) {\n                let filteredRecords = stateResult.records;\n                // If market name provided, try to find similar markets\n                if (market) {\n                    const similarMarkets = stateResult.records.filter((record)=>record.market && record.market.toLowerCase().includes(market.toLowerCase()));\n                    if (similarMarkets.length > 0) {\n                        filteredRecords = similarMarkets;\n                        console.log(`üîç Found ${similarMarkets.length} records with similar market names`);\n                    }\n                }\n                marketData = transformRecords(filteredRecords.slice(0, 100));\n                queryScope = \"state_level\";\n                console.log(`‚úÖ Found ${marketData.length} records at state level`);\n            } else {\n                console.log(\"‚ö†Ô∏è No records found at state level\");\n            }\n        }\n        // Strategy 3: National commodity search (if no state-level match)\n        if (marketData.length === 0) {\n            console.log(\"\\uD83C\\uDF0F Strategy 3: National commodity search\");\n            const nationalResult = await fetchDataGovApi({\n                commodity: commodity\n            }, 300);\n            if (nationalResult.success && nationalResult.records.length > 0) {\n                // Priority order: requested state > any state\n                let prioritizedRecords = nationalResult.records;\n                if (state) {\n                    const stateMatches = prioritizedRecords.filter((record)=>record.state && record.state.toLowerCase().includes(state.toLowerCase()));\n                    if (stateMatches.length > 0) {\n                        prioritizedRecords = [\n                            ...stateMatches,\n                            ...prioritizedRecords.filter((record)=>!record.state || !record.state.toLowerCase().includes(state.toLowerCase()))\n                        ];\n                    }\n                }\n                marketData = transformRecords(prioritizedRecords.slice(0, 100));\n                queryScope = \"national_level\";\n                console.log(`‚úÖ Found ${marketData.length} records at national level`);\n            } else {\n                console.log(\"‚ö†Ô∏è No records found at national level\");\n            }\n        }\n        // Cache the result\n        cache.set(cacheKey, {\n            data: marketData,\n            timestamp: Date.now(),\n            scope: queryScope,\n            totalRecords: marketData.length\n        });\n        // Return response\n        const response = {\n            success: true,\n            data: marketData,\n            scope: queryScope,\n            cached: false,\n            timestamp: Date.now(),\n            query: {\n                commodity,\n                state,\n                market\n            },\n            totalRecords: marketData.length\n        };\n        console.log(`üì§ Returning ${marketData.length} records (scope: ${queryScope})`);\n        return res.status(200).json(response);\n    } catch (error) {\n        console.error(\"\\uD83D\\uDEA8 API Handler Error:\", error);\n        return res.status(500).json({\n            success: false,\n            error: \"Market data service temporarily unavailable. Please try again later.\",\n            details:  true ? error.message : 0\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEdBQUcsQ0FBQyxDQUFDLGFBQWEsRUFBRW1ELFdBQVdsQixNQUFNLENBQUMsaUJBQWlCLEVBQUVtQixXQUFXLENBQUMsQ0FBQztRQUM5RSxPQUFPN0QsSUFBSUcsTUFBTSxDQUFDLEtBQUtPLElBQUksQ0FBQzRCO0lBRTlCLEVBQUUsT0FBT3RCLE9BQU87UUFDZFIsUUFBUVEsS0FBSyxDQUFDLG1DQUF5QkE7UUFDdkMsT0FBT2hCLElBQUlHLE1BQU0sQ0FBQyxLQUFLTyxJQUFJLENBQUM7WUFDMUJDLFNBQVM7WUFDVEssT0FBTztZQUNQNEQsU0FBU0MsS0FBeUIsR0FBZ0I3RCxNQUFNSixPQUFPLEdBQUdrRSxDQUFTQTtRQUM3RTtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tYXJrZXQtYXBpLy4vcGFnZXMvYXBpL21hcmtldC5qcz9mZTZkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7XHJcblxyXG4vLyBDYWNoZSBmb3IgbWFya2V0IGRhdGFcclxuY29uc3QgY2FjaGUgPSBuZXcgTWFwKCk7XHJcbmNvbnN0IENBQ0hFX0RVUkFUSU9OID0gMzAgKiA2MCAqIDEwMDA7IC8vIDMwIG1pbnV0ZXNcclxuXHJcbi8vIERhdGEuZ292LmluIEFQSSBjb25maWd1cmF0aW9uXHJcbmNvbnN0IERBVEFfR09WX0FQSV9LRVkgPSAnNTc5YjQ2NGRiNjZlYzIzYmRkMDAwMDAxNTFkODZjZWYwMTQzNDQ2YjdkMzlmNzQyNWQ2YWZkN2YnO1xyXG5jb25zdCBEQVRBX0dPVl9CQVNFX1VSTCA9ICdodHRwczovL2FwaS5kYXRhLmdvdi5pbi9yZXNvdXJjZS85ZWY4NDI2OC1kNTg4LTQ2NWEtYTMwOC1hODY0YTQzZDAwNzAnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcykge1xyXG4gIC8vIEVuYWJsZSBDT1JTXHJcbiAgcmVzLnNldEhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJywgJyonKTtcclxuICByZXMuc2V0SGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzJywgJ0dFVCwgUE9TVCwgT1BUSU9OUycpO1xyXG4gIHJlcy5zZXRIZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnMnLCAnQ29udGVudC1UeXBlJyk7XHJcblxyXG4gIGlmIChyZXEubWV0aG9kID09PSAnT1BUSU9OUycpIHtcclxuICAgIHJlcy5zdGF0dXMoMjAwKS5lbmQoKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIHRyeSB7XHJcbiAgICAvLyBDbGVhciBjYWNoZSBmb3IgZGVidWdnaW5nXHJcbiAgICBpZiAocmVxLnF1ZXJ5LmNsZWFyQ2FjaGUgPT09ICd0cnVlJykge1xyXG4gICAgICBjYWNoZS5jbGVhcigpO1xyXG4gICAgICBjb25zb2xlLmxvZygn8J+Xke+4jyBDYWNoZSBjbGVhcmVkJyk7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6ICdDYWNoZSBjbGVhcmVkJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB7IGNvbW1vZGl0eSwgc3RhdGUsIG1hcmtldCB9ID0gcmVxLnF1ZXJ5O1xyXG4gICAgaWYgKCFjb21tb2RpdHkpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnTWlzc2luZyByZXF1aXJlZCBwYXJhbWV0ZXI6IGNvbW1vZGl0eScgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2hlY2sgY2FjaGVcclxuICAgIGNvbnN0IGNhY2hlS2V5ID0gYCR7Y29tbW9kaXR5fV8ke3N0YXRlIHx8ICdhbGwnfV8ke21hcmtldCB8fCAnYWxsJ31gO1xyXG4gICAgY29uc3QgY2FjaGVkID0gY2FjaGUuZ2V0KGNhY2hlS2V5KTtcclxuICAgIGlmIChjYWNoZWQgJiYgKERhdGUubm93KCkgLSBjYWNoZWQudGltZXN0YW1wKSA8IENBQ0hFX0RVUkFUSU9OKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCfwn5OLIFJldHVybmluZyBjYWNoZWQgZGF0YSBmb3InLCBjYWNoZUtleSk7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IGNhY2hlZC5kYXRhLCBjYWNoZWQ6IHRydWUsIHRpbWVzdGFtcDogY2FjaGVkLnRpbWVzdGFtcCB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zb2xlLmxvZyhg8J+UjSBGZXRjaGluZyBtYXJrZXQgZGF0YSBmb3IgY29tbW9kaXR5OiAke2NvbW1vZGl0eX0sIHN0YXRlOiAke3N0YXRlIHx8ICdhbnknfSwgbWFya2V0OiAke21hcmtldCB8fCAnYW55J31gKTtcclxuXHJcbiAgICAvLyBSb2J1c3QgRGF0YS5nb3YuaW4gQVBJIGNhbGwgZnVuY3Rpb25cclxuICAgIGNvbnN0IGZldGNoRGF0YUdvdkFwaSA9IGFzeW5jIChmaWx0ZXJzID0ge30sIGxpbWl0ID0gMTAwKSA9PiB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgLy8gQnVpbGQgcXVlcnkgcGFyYW1ldGVyc1xyXG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoe1xyXG4gICAgICAgICAgJ2FwaS1rZXknOiBEQVRBX0dPVl9BUElfS0VZLFxyXG4gICAgICAgICAgJ2Zvcm1hdCc6ICdqc29uJyxcclxuICAgICAgICAgICdsaW1pdCc6IGxpbWl0LnRvU3RyaW5nKClcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gQWRkIGZpbHRlcnNcclxuICAgICAgICBPYmplY3QuZW50cmllcyhmaWx0ZXJzKS5mb3JFYWNoKChba2V5LCB2YWx1ZV0pID0+IHtcclxuICAgICAgICAgIGlmICh2YWx1ZSAmJiB2YWx1ZS50cmltKCkpIHtcclxuICAgICAgICAgICAgcGFyYW1zLmFwcGVuZChgZmlsdGVyc1ske2tleX1dYCwgdmFsdWUudHJpbSgpKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgdXJsID0gYCR7REFUQV9HT1ZfQkFTRV9VUkx9PyR7cGFyYW1zLnRvU3RyaW5nKCl9YDtcclxuICAgICAgICBjb25zb2xlLmxvZyhg8J+ToSBBUEkgQ2FsbDogJHt1cmx9YCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KHVybCwge1xyXG4gICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgICAnVXNlci1BZ2VudCc6ICdBZ3JpY3VsdHVyZUFwcC8xLjAgKEdvdmVybm1lbnQgRGF0YSBBY2Nlc3MpJ1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHRpbWVvdXQ6IDMwMDAwXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKGDwn5OKIEFQSSBSZXNwb25zZTogU3RhdHVzICR7cmVzcG9uc2Uuc3RhdHVzfSwgUmVjb3JkczogJHtyZXNwb25zZS5kYXRhPy5yZWNvcmRzPy5sZW5ndGggfHwgMH0vJHtyZXNwb25zZS5kYXRhPy50b3RhbCB8fCAwfWApO1xyXG5cclxuICAgICAgICBpZiAocmVzcG9uc2UuZGF0YSAmJiByZXNwb25zZS5kYXRhLnN0YXR1cyA9PT0gJ29rJyAmJiBBcnJheS5pc0FycmF5KHJlc3BvbnNlLmRhdGEucmVjb3JkcykpIHtcclxuICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlY29yZHM6IHJlc3BvbnNlLmRhdGEucmVjb3JkcyxcclxuICAgICAgICAgICAgdG90YWw6IHJlc3BvbnNlLmRhdGEudG90YWwsXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWVcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCfimqDvuI8gSW52YWxpZCBBUEkgcmVzcG9uc2Ugc3RydWN0dXJlOicsIHJlc3BvbnNlLmRhdGEpO1xyXG4gICAgICAgICAgcmV0dXJuIHsgcmVjb3JkczogW10sIHRvdGFsOiAwLCBzdWNjZXNzOiBmYWxzZSB9O1xyXG4gICAgICAgIH1cclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgRGF0YS5nb3YuaW4gQVBJIEVycm9yOicsIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBFcnJvciBkZXRhaWxzOicsIHtcclxuICAgICAgICAgIHN0YXR1czogZXJyb3IucmVzcG9uc2U/LnN0YXR1cyxcclxuICAgICAgICAgIHN0YXR1c1RleHQ6IGVycm9yLnJlc3BvbnNlPy5zdGF0dXNUZXh0LFxyXG4gICAgICAgICAgZGF0YTogZXJyb3IucmVzcG9uc2U/LmRhdGFcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4geyByZWNvcmRzOiBbXSwgdG90YWw6IDAsIHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIFRyYW5zZm9ybSByZWNvcmRzIHRvIGV4cGVjdGVkIGZvcm1hdFxyXG4gICAgY29uc3QgdHJhbnNmb3JtUmVjb3JkcyA9IChyZWNvcmRzLCBzb3VyY2UgPSAnZGF0YS5nb3YuaW4nKSA9PiB7XHJcbiAgICAgIHJldHVybiByZWNvcmRzLm1hcCgocmVjb3JkLCBpbmRleCkgPT4gKHtcclxuICAgICAgICBcIlMuTm9cIjogKGluZGV4ICsgMSkudG9TdHJpbmcoKSxcclxuICAgICAgICBcIkNpdHlcIjogcmVjb3JkLm1hcmtldCB8fCByZWNvcmQuZGlzdHJpY3QgfHwgJ1Vua25vd24nLFxyXG4gICAgICAgIFwiU3RhdGVcIjogcmVjb3JkLnN0YXRlIHx8ICdVbmtub3duJyxcclxuICAgICAgICBcIkRpc3RyaWN0XCI6IHJlY29yZC5kaXN0cmljdCB8fCAnVW5rbm93bicsXHJcbiAgICAgICAgXCJNYXJrZXRcIjogcmVjb3JkLm1hcmtldCB8fCAnVW5rbm93bicsXHJcbiAgICAgICAgXCJDb21tb2RpdHlcIjogcmVjb3JkLmNvbW1vZGl0eSB8fCBjb21tb2RpdHksXHJcbiAgICAgICAgXCJWYXJpZXR5XCI6IHJlY29yZC52YXJpZXR5IHx8ICdTdGFuZGFyZCcsXHJcbiAgICAgICAgXCJHcmFkZVwiOiByZWNvcmQuZ3JhZGUgfHwgJ0ZBUScsXHJcbiAgICAgICAgXCJNaW4gUHJpemVcIjogcmVjb3JkLm1pbl9wcmljZSA/IHJlY29yZC5taW5fcHJpY2UudG9TdHJpbmcoKSA6ICcwJyxcclxuICAgICAgICBcIk1heCBQcml6ZVwiOiByZWNvcmQubWF4X3ByaWNlID8gcmVjb3JkLm1heF9wcmljZS50b1N0cmluZygpIDogJzAnLFxyXG4gICAgICAgIFwiTW9kZWwgUHJpemVcIjogcmVjb3JkLm1vZGFsX3ByaWNlID8gcmVjb3JkLm1vZGFsX3ByaWNlLnRvU3RyaW5nKCkgOiAnMCcsXHJcbiAgICAgICAgXCJEYXRlXCI6IHJlY29yZC5hcnJpdmFsX2RhdGUgfHwgbmV3IERhdGUoKS50b0xvY2FsZURhdGVTdHJpbmcoJ2VuLUlOJyksXHJcbiAgICAgICAgXCJTb3VyY2VcIjogc291cmNlXHJcbiAgICAgIH0pKTtcclxuICAgIH07XHJcblxyXG4gICAgbGV0IG1hcmtldERhdGEgPSBbXTtcclxuICAgIGxldCBxdWVyeVNjb3BlID0gJ25vbmUnO1xyXG5cclxuICAgIC8vIFN0cmF0ZWd5IDE6IEV4YWN0IG1hcmtldCBtYXRjaCAoaWYgYm90aCBzdGF0ZSBhbmQgbWFya2V0IHByb3ZpZGVkKVxyXG4gICAgaWYgKHN0YXRlICYmIG1hcmtldCkge1xyXG4gICAgICBjb25zb2xlLmxvZygn8J+OryBTdHJhdGVneSAxOiBFeGFjdCBtYXJrZXQgbWF0Y2gnKTtcclxuICAgICAgY29uc3QgZXhhY3RSZXN1bHQgPSBhd2FpdCBmZXRjaERhdGFHb3ZBcGkoe1xyXG4gICAgICAgIGNvbW1vZGl0eTogY29tbW9kaXR5LFxyXG4gICAgICAgIHN0YXRlOiBzdGF0ZSxcclxuICAgICAgICBtYXJrZXQ6IG1hcmtldFxyXG4gICAgICB9LCA1MCk7XHJcblxyXG4gICAgICBpZiAoZXhhY3RSZXN1bHQuc3VjY2VzcyAmJiBleGFjdFJlc3VsdC5yZWNvcmRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBtYXJrZXREYXRhID0gdHJhbnNmb3JtUmVjb3JkcyhleGFjdFJlc3VsdC5yZWNvcmRzKTtcclxuICAgICAgICBxdWVyeVNjb3BlID0gJ2V4YWN0X21hcmtldCc7XHJcbiAgICAgICAgY29uc29sZS5sb2coYOKchSBGb3VuZCAke21hcmtldERhdGEubGVuZ3RofSByZWNvcmRzIGZvciBleGFjdCBtYXJrZXQgbWF0Y2hgKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zb2xlLmxvZygn4pqg77iPIE5vIHJlY29yZHMgZm91bmQgZm9yIGV4YWN0IG1hcmtldCBtYXRjaCcpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU3RyYXRlZ3kgMjogU3RhdGUtbGV2ZWwgc2VhcmNoIChpZiBubyBleGFjdCBtYXRjaCBvciBvbmx5IHN0YXRlIHByb3ZpZGVkKVxyXG4gICAgaWYgKG1hcmtldERhdGEubGVuZ3RoID09PSAwICYmIHN0YXRlKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCfwn4yNIFN0cmF0ZWd5IDI6IFN0YXRlLWxldmVsIHNlYXJjaCcpO1xyXG4gICAgICBjb25zdCBzdGF0ZVJlc3VsdCA9IGF3YWl0IGZldGNoRGF0YUdvdkFwaSh7XHJcbiAgICAgICAgY29tbW9kaXR5OiBjb21tb2RpdHksXHJcbiAgICAgICAgc3RhdGU6IHN0YXRlXHJcbiAgICAgIH0sIDIwMCk7XHJcblxyXG4gICAgICBpZiAoc3RhdGVSZXN1bHQuc3VjY2VzcyAmJiBzdGF0ZVJlc3VsdC5yZWNvcmRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBsZXQgZmlsdGVyZWRSZWNvcmRzID0gc3RhdGVSZXN1bHQucmVjb3JkcztcclxuICAgICAgICBcclxuICAgICAgICAvLyBJZiBtYXJrZXQgbmFtZSBwcm92aWRlZCwgdHJ5IHRvIGZpbmQgc2ltaWxhciBtYXJrZXRzXHJcbiAgICAgICAgaWYgKG1hcmtldCkge1xyXG4gICAgICAgICAgY29uc3Qgc2ltaWxhck1hcmtldHMgPSBzdGF0ZVJlc3VsdC5yZWNvcmRzLmZpbHRlcihyZWNvcmQgPT4gXHJcbiAgICAgICAgICAgIHJlY29yZC5tYXJrZXQgJiYgcmVjb3JkLm1hcmtldC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKG1hcmtldC50b0xvd2VyQ2FzZSgpKVxyXG4gICAgICAgICAgKTtcclxuICAgICAgICAgIGlmIChzaW1pbGFyTWFya2V0cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGZpbHRlcmVkUmVjb3JkcyA9IHNpbWlsYXJNYXJrZXRzO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhg8J+UjSBGb3VuZCAke3NpbWlsYXJNYXJrZXRzLmxlbmd0aH0gcmVjb3JkcyB3aXRoIHNpbWlsYXIgbWFya2V0IG5hbWVzYCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBtYXJrZXREYXRhID0gdHJhbnNmb3JtUmVjb3JkcyhmaWx0ZXJlZFJlY29yZHMuc2xpY2UoMCwgMTAwKSk7XHJcbiAgICAgICAgcXVlcnlTY29wZSA9ICdzdGF0ZV9sZXZlbCc7XHJcbiAgICAgICAgY29uc29sZS5sb2coYOKchSBGb3VuZCAke21hcmtldERhdGEubGVuZ3RofSByZWNvcmRzIGF0IHN0YXRlIGxldmVsYCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ+KaoO+4jyBObyByZWNvcmRzIGZvdW5kIGF0IHN0YXRlIGxldmVsJyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBTdHJhdGVneSAzOiBOYXRpb25hbCBjb21tb2RpdHkgc2VhcmNoIChpZiBubyBzdGF0ZS1sZXZlbCBtYXRjaClcclxuICAgIGlmIChtYXJrZXREYXRhLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICBjb25zb2xlLmxvZygn8J+MjyBTdHJhdGVneSAzOiBOYXRpb25hbCBjb21tb2RpdHkgc2VhcmNoJyk7XHJcbiAgICAgIGNvbnN0IG5hdGlvbmFsUmVzdWx0ID0gYXdhaXQgZmV0Y2hEYXRhR292QXBpKHtcclxuICAgICAgICBjb21tb2RpdHk6IGNvbW1vZGl0eVxyXG4gICAgICB9LCAzMDApO1xyXG5cclxuICAgICAgaWYgKG5hdGlvbmFsUmVzdWx0LnN1Y2Nlc3MgJiYgbmF0aW9uYWxSZXN1bHQucmVjb3Jkcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgLy8gUHJpb3JpdHkgb3JkZXI6IHJlcXVlc3RlZCBzdGF0ZSA+IGFueSBzdGF0ZVxyXG4gICAgICAgIGxldCBwcmlvcml0aXplZFJlY29yZHMgPSBuYXRpb25hbFJlc3VsdC5yZWNvcmRzO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChzdGF0ZSkge1xyXG4gICAgICAgICAgY29uc3Qgc3RhdGVNYXRjaGVzID0gcHJpb3JpdGl6ZWRSZWNvcmRzLmZpbHRlcihyZWNvcmQgPT4gXHJcbiAgICAgICAgICAgIHJlY29yZC5zdGF0ZSAmJiByZWNvcmQuc3RhdGUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzdGF0ZS50b0xvd2VyQ2FzZSgpKVxyXG4gICAgICAgICAgKTtcclxuICAgICAgICAgIGlmIChzdGF0ZU1hdGNoZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBwcmlvcml0aXplZFJlY29yZHMgPSBbLi4uc3RhdGVNYXRjaGVzLCAuLi5wcmlvcml0aXplZFJlY29yZHMuZmlsdGVyKHJlY29yZCA9PiBcclxuICAgICAgICAgICAgICAhcmVjb3JkLnN0YXRlIHx8ICFyZWNvcmQuc3RhdGUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzdGF0ZS50b0xvd2VyQ2FzZSgpKVxyXG4gICAgICAgICAgICApXTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG1hcmtldERhdGEgPSB0cmFuc2Zvcm1SZWNvcmRzKHByaW9yaXRpemVkUmVjb3Jkcy5zbGljZSgwLCAxMDApKTtcclxuICAgICAgICBxdWVyeVNjb3BlID0gJ25hdGlvbmFsX2xldmVsJztcclxuICAgICAgICBjb25zb2xlLmxvZyhg4pyFIEZvdW5kICR7bWFya2V0RGF0YS5sZW5ndGh9IHJlY29yZHMgYXQgbmF0aW9uYWwgbGV2ZWxgKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zb2xlLmxvZygn4pqg77iPIE5vIHJlY29yZHMgZm91bmQgYXQgbmF0aW9uYWwgbGV2ZWwnKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIENhY2hlIHRoZSByZXN1bHRcclxuICAgIGNhY2hlLnNldChjYWNoZUtleSwgeyBcclxuICAgICAgZGF0YTogbWFya2V0RGF0YSwgXHJcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcclxuICAgICAgc2NvcGU6IHF1ZXJ5U2NvcGUsXHJcbiAgICAgIHRvdGFsUmVjb3JkczogbWFya2V0RGF0YS5sZW5ndGhcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIFJldHVybiByZXNwb25zZVxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSB7XHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIGRhdGE6IG1hcmtldERhdGEsXHJcbiAgICAgIHNjb3BlOiBxdWVyeVNjb3BlLFxyXG4gICAgICBjYWNoZWQ6IGZhbHNlLFxyXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXHJcbiAgICAgIHF1ZXJ5OiB7IGNvbW1vZGl0eSwgc3RhdGUsIG1hcmtldCB9LFxyXG4gICAgICB0b3RhbFJlY29yZHM6IG1hcmtldERhdGEubGVuZ3RoXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnNvbGUubG9nKGDwn5OkIFJldHVybmluZyAke21hcmtldERhdGEubGVuZ3RofSByZWNvcmRzIChzY29wZTogJHtxdWVyeVNjb3BlfSlgKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihyZXNwb25zZSk7XHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCfwn5qoIEFQSSBIYW5kbGVyIEVycm9yOicsIGVycm9yKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IFxyXG4gICAgICBzdWNjZXNzOiBmYWxzZSwgXHJcbiAgICAgIGVycm9yOiAnTWFya2V0IGRhdGEgc2VydmljZSB0ZW1wb3JhcmlseSB1bmF2YWlsYWJsZS4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4nLFxyXG4gICAgICBkZXRhaWxzOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JyA/IGVycm9yLm1lc3NhZ2UgOiB1bmRlZmluZWRcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuIl0sIm5hbWVzIjpbImF4aW9zIiwiY2FjaGUiLCJNYXAiLCJDQUNIRV9EVVJBVElPTiIsIkRBVEFfR09WX0FQSV9LRVkiLCJEQVRBX0dPVl9CQVNFX1VSTCIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJzZXRIZWFkZXIiLCJtZXRob2QiLCJzdGF0dXMiLCJlbmQiLCJxdWVyeSIsImNsZWFyQ2FjaGUiLCJjbGVhciIsImNvbnNvbGUiLCJsb2ciLCJqc29uIiwic3VjY2VzcyIsIm1lc3NhZ2UiLCJjb21tb2RpdHkiLCJzdGF0ZSIsIm1hcmtldCIsImVycm9yIiwiY2FjaGVLZXkiLCJjYWNoZWQiLCJnZXQiLCJEYXRlIiwibm93IiwidGltZXN0YW1wIiwiZGF0YSIsImZldGNoRGF0YUdvdkFwaSIsImZpbHRlcnMiLCJsaW1pdCIsInBhcmFtcyIsIlVSTFNlYXJjaFBhcmFtcyIsInRvU3RyaW5nIiwiT2JqZWN0IiwiZW50cmllcyIsImZvckVhY2giLCJrZXkiLCJ2YWx1ZSIsInRyaW0iLCJhcHBlbmQiLCJ1cmwiLCJyZXNwb25zZSIsImhlYWRlcnMiLCJ0aW1lb3V0IiwicmVjb3JkcyIsImxlbmd0aCIsInRvdGFsIiwiQXJyYXkiLCJpc0FycmF5Iiwic3RhdHVzVGV4dCIsInRyYW5zZm9ybVJlY29yZHMiLCJzb3VyY2UiLCJtYXAiLCJyZWNvcmQiLCJpbmRleCIsImRpc3RyaWN0IiwidmFyaWV0eSIsImdyYWRlIiwibWluX3ByaWNlIiwibWF4X3ByaWNlIiwibW9kYWxfcHJpY2UiLCJhcnJpdmFsX2RhdGUiLCJ0b0xvY2FsZURhdGVTdHJpbmciLCJtYXJrZXREYXRhIiwicXVlcnlTY29wZSIsImV4YWN0UmVzdWx0Iiwic3RhdGVSZXN1bHQiLCJmaWx0ZXJlZFJlY29yZHMiLCJzaW1pbGFyTWFya2V0cyIsImZpbHRlciIsInRvTG93ZXJDYXNlIiwiaW5jbHVkZXMiLCJzbGljZSIsIm5hdGlvbmFsUmVzdWx0IiwicHJpb3JpdGl6ZWRSZWNvcmRzIiwic3RhdGVNYXRjaGVzIiwic2V0Iiwic2NvcGUiLCJ0b3RhbFJlY29yZHMiLCJkZXRhaWxzIiwicHJvY2VzcyIsInVuZGVmaW5lZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/market.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fmarket&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cmarket.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();